# AI-сервис заявок по банкротству

Веб-сервис для первичной обработки текстовых заявок по банкротству физических лиц:

- **Классификация типа заявки:**
  - консультация
  - подготовка документов
  - подача заявления
- **Извлечение ключевых параметров:**
  - сумма долга
  - количество кредиторов
  - наличие просрочек
- **Формирование краткого текстового резюме для юриста**

## Технологический стек

- **Backend:** Python, Flask, Gunicorn, SQLAlchemy (SQLite)
- **ML:** scikit-learn (TfidfVectorizer + LogisticRegression)
- **NLP:** векторизация текста, извлечение параметров через LLM
- **Интеграция с внешним AI:** OpenAI-совместимый API
- **Инфраструктура:** Docker, docker-compose, конфигурация через .env

## Архитектура

1. Пользователь отправляет текст заявки через веб-интерфейс.
2. Backend (Flask) принимает запрос и:
   - передаёт текст в ML-модель для классификации типа заявки;
   - обращается к внешнему AI-API для генерации резюме и извлечения полей (долг, кредиторы, просрочка);
   - сохраняет результат в БД (SQLite).
3. Результат возвращается на фронтенд (HTML или JSON) и отображается пользователю.

## Запуск через Docker

```bash
cp .env.example .env   # заполнить API_KEY и при необходимости OPENAI_BASE_URL
docker compose up --build
```

Сервис доступен по адресу: http://localhost:8082

## Локальный запуск (без Docker)

```bash
python -m venv venv
source venv/bin/activate   # или venv\Scripts\activate в Windows
pip install -r requirements.txt

cp .env.example .env   # указать API_KEY
python scripts/train_model.py   # один раз обучить модель
python run.py   # или: gunicorn -b 0.0.0.0:8082 wsgi:app
```

## Примеры запросов и ответов

**Пример входа:**

> Хочу подать на банкротство, долг около 850000 рублей, 5 кредиторов, есть просрочка более 6 месяцев.

**Пример ответа API (POST /api/analyze):**

```json
{
  "label": "подача_заявления",
  "confidence": 0.72,
  "summary": "Клиент планирует подачу заявления о банкротстве. Сумма долга около 850 000 ₽, 5 кредиторов, просрочка более 6 месяцев.",
  "fields": {
    "total_debt": 850000,
    "creditors_count": 5,
    "has_overdue": true,
    "notes": "Просрочка более 6 месяцев."
  }
}
```

## Зачем этот проект

Проект демонстрирует полный цикл разработки AI-сервиса для legal-tech / банкротств:

- от ML-модели классификации до рабочего веб-сервиса;
- упаковка в Docker и готовность к развёртыванию;
- интеграция внешнего AI-API и сохранение результатов в БД.

Переменные окружения — см. `.env.example` (обязателен `API_KEY`).
