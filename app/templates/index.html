<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обработка заявок по банкротству</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; max-width: 720px; margin: 0 auto; padding: 1.5rem; }
        h1 { font-size: 1.25rem; margin-bottom: 1rem; }
        label { display: block; margin-bottom: 0.25rem; font-weight: 500; }
        textarea { width: 100%; min-height: 120px; padding: 0.5rem; margin-bottom: 0.75rem; }
        button { padding: 0.5rem 1rem; cursor: pointer; }
        .error { color: #c00; margin-bottom: 0.75rem; }
        .result { margin-top: 1.5rem; padding: 1rem; background: #f5f5f5; border-radius: 6px; }
        .result h2 { font-size: 1rem; margin-top: 0; margin-bottom: 0.5rem; }
        .result p { margin: 0.25rem 0; }
        pre { overflow-x: auto; font-size: 0.85rem; }
    </style>
</head>
<body>
    <h1>AI-сервис: обработка заявок по банкротству</h1>
    <form method="post" action="/analyze">
        <label for="text">Текст заявки</label>
        <textarea id="text" name="text" placeholder="Опишите долговую ситуацию...">{{ text or '' }}</textarea>
        {% if error %}
        <p class="error">{{ error }}</p>
        {% endif %}
        <button type="submit">Анализировать</button>
    </form>

    {% if label is not none %}
    <div class="result">
        <h2>Результат</h2>
        <p><strong>Класс заявки:</strong> {{ label }}</p>
        {% if confidence is defined and confidence is not none %}
        <p><strong>Уверенность:</strong> {{ "%.2f"|format(confidence) }}</p>
        {% endif %}
        <p><strong>Резюме для юриста:</strong><br>{{ summary or '—' }}</p>
        {% if fields %}
        <p><strong>Извлечённые поля:</strong></p>
        <pre>{{ fields }}</pre>
        {% endif %}
    </div>
    {% endif %}
</body>
</html>
